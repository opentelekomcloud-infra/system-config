- project:
    merge-mode: squash-merge
    check:
      jobs:
        - otc-tox-linters
        - system-config-run-base
        - system-config-run-statsd
        - system-config-run-apimon-epmon
        - system-config-run-apimon-scheduler
        - system-config-run-apimon-executor
        - system-config-run-graphite
        - system-config-run-memcached
    gate:
      jobs:
        - otc-tox-linters
        - system-config-run-base
        - system-config-run-statsd
        - system-config-run-apimon-epmon
        - system-config-run-apimon-scheduler
        - system-config-run-apimon-executor
        - system-config-run-graphite
        - system-config-run-memcached
    deploy:
      jobs:
        - infra-prod-install-ansible
        - infra-prod-base
        - infra-prod-service-bridge
        - infra-prod-service-statsd
        - infra-prod-service-apimon-epmon
        - infra-prod-service-apimon-scheduler
        - infra-prod-service-apimon-executor
        # memcached should come before graphite
        - infra-prod-service-memcached
        - infra-prod-service-graphite
    periodic:
      # Nightly execution
      jobs:
        - infra-prod-install-ansible
        - infra-prod-base
        - infra-prod-service-bridge
        - infra-prod-service-grafana-dashboards
        - infra-prod-service-statsd
        - infra-prod-service-apimon-epmon
        - infra-prod-service-apimon-scheduler
        - infra-prod-service-apimon-executor
        - infra-prod-service-memcached
        - infra-prod-service-graphite
    periodic-hourly:
      # hourly execution
      jobs:
        - infra-prod-install-ansible
        - infra-prod-service-bridge:
            dependencies:
              - name: infra-prod-install-ansible
                soft: true
