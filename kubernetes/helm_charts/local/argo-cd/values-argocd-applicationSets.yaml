applicationSets:
  - name: root-app-of-apps-infra
    project: infra
    applications:
      - name: argocd
        namespace: argocd
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/upstream/argo-cd
        valueFiles:
          - values-preprod.yaml
        clusters: [in-cluster]
        project: infra
      - name: argocd-projects
        namespace: argocd
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/local/argo-cd
        valueFiles:
          - values-argocd-projects.yaml
        clusters: [in-cluster]
        project: infra
      - name: argocd-applications
        namespace: argocd
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/local/argo-cd
        valueFiles:
          - values-argocd-applications.yaml
        clusters: [in-cluster]
        project: infra

  - name: cert-manager
    project: infra
    applications:
      - name: cert-manager
        namespace: cert-manager
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/upstream/cert-manager
        valueFiles:
          - values-preprod.yaml
        clusters: [in-cluster]
        project: infra
        syncPolicy:
          automated:
            prune: true
            selfHeal: true
          syncOptions:
            - CreateNamespace=true
      - name: cert-manager-additional-manifests
        namespace: cert-manager
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/local/cert-manager
        valueFiles:
          - values.yaml
        clusters: [in-cluster]
        project: infra

  - name: prometheus
    project: infra
    applications:
      - name: prometheus
        namespace: monitoring
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/upstream/kube-prometheus-stack
        valueFiles:
          - values-preprod.yaml
        clusters: [in-cluster]
        project: infra
        syncPolicy:
          automated:
            prune: true
            selfHeal: true
          syncOptions:
            - CreateNamespace=true
      - name: prometheus-additional-manifests
        namespace: monitoring
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/local/kube-prometheus-stack
        valueFiles:
          - values-preprod.yaml
        clusters: [in-cluster]
        project: infra

  - name: victoria-metrics-cluster
    project: infra
    applications:
      - name: victoria-metrics-cluster
        namespace: monitoring
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: kubernetes/helm_charts/upstream/victoria-metrics-cluster
        valueFiles:
          - values-preprod.yaml
        clusters: [in-cluster]
        project: infra
      - name: victoria-metrics-cluster-additional-manifests
        namespace: monitoring
        repoURL: 'https://github.com/opentelekomcloud-infra/system-config.git'
        targetRevision: feature-1299-Make_ArgoCD_a_part_of_the_ArgoCD_Apps
        path: github/system-config/kubernetes/helm_charts/local/victoria-metrics-cluster
        valueFiles:
          - values.yaml
        clusters: [in-cluster]
        project: infra
