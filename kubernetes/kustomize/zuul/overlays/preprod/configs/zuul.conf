[zookeeper]
hosts=zookeeper.zuul-preprod.svc.cluster.local:2281
tls_cert=/tls/client/tls.crt
tls_key=/tls/client/tls.key
tls_ca=/tls/client/ca.crt
session_timeout=40

[scheduler]
tenant_config_script=/etc/zuul-config/tools/render_config.py
state_dir=/var/lib/zuul
relative_priority=true
prometheus_port=9091

[web]
listen_address=0.0.0.0
port=9000
status_url=https://zuul.eco-preprod.tsi-dev.otc-service.com
root=https://zuul.eco-preprod.tsi-dev.otc-service.com
prometheus_port=9091

[fingergw]
port=9079
user=zuul

[keystore]
password=<vault:secret/data/zuul/preprod/keystore_password#password>

[merger]
git_dir=/var/lib/zuul/git
git_timeout=600
git_user_email=zuul@zuul.eco-preprod.tsi-dev.otc-service.com
git_user_name=OpenTelekomCloud Zuul Preprod
prometheus_port=9091

[executor]
manage_ansible=true
ansible_root=/var/lib/zuul/managed_ansible
private_key_file=/etc/zuul/sshkey
disk_limit_per_job=5000
max_starting_builds=5
trusted_ro_paths=/var/run/zuul/trusted-ro
variables=/var/run/zuul/vars/site-vars.yaml
prometheus_port=9091

[database]
dburi=postgresql://<vault:secret/data/zuul/preprod/database#username>:<vault:secret/data/zuul/preprod/database#password>@<vault:secret/data/zuul/preprod/database#host>:5432/<vault:secret/data/zuul/preprod/database#dbname>?sslmode=require

[connection "github"]
name=github
driver=github
webhook_token=<vault:secret/data/zuul/preprod/connections/github#webhook_token>
app_id=<vault:secret/data/zuul/preprod/connections/github#app_id>
app_key=/etc/zuul/connections/github.key

[connection "gitlab"]
name=gitlab
driver=gitlab
canonical_hostname=gitlab
cloneurl=ssh://git@git-ssh.tsi-dev.otc-service.com
server=git.tsi-dev.otc-service.com
api_token=<vault:secret/data/zuul/preprod/connections/gitlab#api_token>
webhook_token=<vault:secret/data/zuul/preprod/connections/gitlab#webhook_token>
sshkey=/etc/zuul/connections/gitlab.key

[connection "opendev"]
name=opendev
driver=git
baseurl=https://opendev.org

[connection "gitea"]
name=gitea
driver=gitea
baseurl=https://gitea.eco.tsi-dev.otc-service.com
server=gitea.eco.tsi-dev.otc-service.com
cloneurl=ssh://git@gitea.eco.tsi-dev.otc-service.com:2222
api_token=<vault:secret/data/zuul/preprod/connections/gitea#api_token>
webhook_secret=<vault:secret/data/zuul/preprod/connections/gitea#webhook_secret>
sshkey=/etc/zuul/connections/gitea.key

[connection "smtp"]
name=smtp
driver=smtp
server=otc-de-out.mms.t-systems-service.com
port=25
default_from=zuul@zuul.eco-preprod.tsi-dev.otc-service.com
default_to=DL-PBCOTCDELECOCERT@t-systems.com
user=<vault:secret/data/zuul/preprod/smtp_gw#username>
password=<vault:secret/data/zuul/preprod/smtp_gw#password>
use_starttls=True

[auth "zitadel"]
default=True
driver=OpenIDConnect
realm=eco
issuer_id=https://zitadel.eco.tsi-dev.otc-service.com/realms/eco
client_id=zuul-preprod
