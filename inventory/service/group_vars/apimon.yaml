apimon_epmon_config_template: templates/apimon/apimon.yaml.j2
apimon_epmon_image: '{{ apimon_image }}'
apimon_epmon_secure_config_template: templates/apimon/apimon-secure.yaml.j2
apimon_executor_config_template: templates/apimon/executor-config.yaml.j2
apimon_executor_image: '{{ apimon_image }}'
apimon_executor_secure_config_template: templates/apimon/executor-secure-config.yaml.j2
apimon_image: quay.io/opentelekomcloud/apimon:quay.io/opentelekomcloud/apimon
apimon_instances:
  hybrid:
    clouds:
    - cloud: otcapimon_hybrid_eum
      name: hybrid_eum
    - cloud: otcapimon_hybrid_sbb
      name: hybrid_sbb
    - cloud: otcapimon_logs
      name: swift
    epmon_clouds:
    - hybrid_eum:
        service_override: '{{ [epmon_as, epmon_ces, epmon_compute, epmon_cinder, epmon_keystone,
          epmon_glance, epmon_network, epmon_swift, epmon_rest] | combine }}'
    - hybrid_sbb:
        service_override: '{{ [epmon_as, epmon_ces, epmon_compute, epmon_cinder, epmon_cts,
          epmon_keystone, epmon_glance, epmon_network, epmon_swift, epmon_sdrs, epmon_rds,
          epmon_rest] | combine }}'
    epmon_interval: 60
    gearman_host: 192.168.110.249
    image_tag: change_25_latest
    statsd_host: 192.168.110.249
    test_environments:
    - clouds:
      - hybrid_eum
      env:
        OS_CLOUD: hybrid_eum
      name: hybrid_eum
    - clouds:
      - hybrid_sbb
      env:
        OS_CLOUD: hybrid_sbb
      name: hybrid_sbb
    test_matrix:
    - env: hybrid_eum
      project: apimon
      tasks:
      - scenario1_token.yaml
      - scenario3a_evs_az.yaml
      - scenario4_image.yaml
      - scenario30_domains.yaml
    - env: hybrid_sbb
      project: apimon
      tasks:
      - scenario1_token.yaml
      - scenario3a_evs_az.yaml
      - scenario4_image.yaml
      - scenario30_domains.yaml
    test_projects:
    - exec_cmd: ansible-playbook -i inventory/hybrid %s
      name: apimon
      repo_ref: master
      repo_url: https://github.com/opentelekomcloud-infra/apimon-tests
      scenarios_location: playbooks
    zone: production_eu-de
  preprod:
    clouds:
    - cloud: otcapimon_preprod
      name: preprod
    - cloud: otcapimon_logs
      name: swift
    epmon_clouds:
    - preprod:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_cts, epmon_dcs, epmon_dcs, epmon_dds, epmon_deh,
          epmon_skip_dis, epmon_dms, epmon_designate, epmon_dws, epmon_keystone, epmon_mrs,
          epmon_nat, epmon_network, epmon_swift, epmon_heat, epmon_rds, epmon_rest,
          epmon_sdrs, epmon_sfs, epmon_skip_smn] | combine }}'
    gearman_host: 192.168.110.207
    image_tag: change_25_latest
    statsd_host: 192.168.110.207
    test_environments:
    - clouds:
      - preprod
      env:
        OS_CLOUD: preprod
      name: preprod
    test_matrix:
    - env: preprod
      project: apimon
      tasks:
      - scenario1_token.yaml
      - scenario2_simple_ecs.yaml
      - scenario3a_evs_az.yaml
      - scenario4_image.yaml
      - scenario30_domains.yaml
    test_projects:
    - exec_cmd: ansible-playbook -i inventory/preprod %s
      name: apimon
      repo_ref: master
      repo_url: https://github.com/opentelekomcloud-infra/apimon-tests
      scenarios_location: playbooks
    zone: production_eu-de
  production:
    clouds:
    - cloud: otcapimon_probes11
      name: production_eu-de
    - cloud: otcapimon_probes15
      name: production_eu-nl
    - cloud: otcapimon_logs
      name: swift
    - cloud: otcapimon_csm1
      name: production_eu-de-csm
    epmon_clouds:
    - production_eu-de:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_css, epmon_cts, epmon_dcs, epmon_dds, epmon_deh,
          epmon_dis, epmon_dms, epmon_designate, epmon_dws, epmon_glance, epmon_keystone,
          epmon_kms, epmon_mrs, epmon_nat, epmon_network, epmon_swift, epmon_heat,
          epmon_rds, epmon_rest, epmon_sdrs, epmon_sfs, epmon_smn] | combine }}'
    - production_eu-nl:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_css, epmon_cts, epmon_dcs, epmon_dds, epmon_deh,
          epmon_dis, epmon_dms, epmon_designate, epmon_dws, epmon_glance, epmon_keystone,
          epmon_kms_nl, epmon_mrs, epmon_nat, epmon_network, epmon_swift, epmon_heat,
          epmon_rds, epmon_rest, epmon_sdrs, epmon_sfs, epmon_smn] | combine }}'
    gearman_host: 192.168.110.58
    image_tag: change_25_latest
    statsd_host: 192.168.110.58
    test_environments:
    - clouds:
      - production_eu-de
      env:
        CSM_CLOUD: production_eu-de-csm
        OS_CLOUD: production_eu-de
      name: production_eu-de
    - clouds:
      - production_eu-nl
      env:
        OS_CLOUD: production_eu-nl
      name: production_eu-nl
    test_matrix:
    - env: production_eu-de
      project: apimon
    - env: production_eu-nl
      project: apimon
      tasks:
      - scenario1_token.yaml
      - scenario3a_evs_az.yaml
      - scenario4_image.yaml
      - scenario21_as.yaml
      - scenario18_cce_info.yaml
      - scenario18a_cluster.yaml
      - scenario20_rds.yaml
      - scenario19_simple_vpc.yaml
      - scenario2_simple_ecs.yaml
      - scenario2a_ecs_az.yaml
      - scenario2c_coreos_az.yaml
    - env: production_eu-de
      project: csm
      tasks:
      - lb_monitoring.yaml
    test_projects:
    - exec_cmd: ansible-playbook -i inventory/production %s
      name: apimon
      repo_ref: master
      repo_url: https://github.com/opentelekomcloud-infra/apimon-tests
      scenarios_location: playbooks
    - exec_cmd: ansible-playbook %s
      name: csm
      repo_ref: main
      repo_url: https://github.com/opentelekomcloud-infra/csm-test-scenarios
      scenarios_location: playbooks
    zone: production_eu-de
  production_2:
    clouds:
    - cloud: otcapimon_probes13
      name: production_eu-de
    - cloud: otcapimon_logs
      name: swift
    epmon_clouds:
    - production_eu-de:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_css, epmon_cts, epmon_dcs, epmon_dds, epmon_deh,
          epmon_dis, epmon_dms, epmon_designate, epmon_dws, epmon_glance, epmon_keystone,
          epmon_kms, epmon_mrs, epmon_nat, epmon_network, epmon_swift, epmon_heat,
          epmon_rds, epmon_rest, epmon_sdrs, epmon_sfs, epmon_smn] | combine }}'
    gearman_host: apimon-scheduler-prod-2
    image_tag: change_25_latest
    statsd_host: 127.0.0.1
    test_environments:
    - clouds:
      - production_eu-de
      env:
        OS_CLOUD: production_eu-de
      name: production_eu-de
    test_matrix:
    - env: production_eu-de
      project: apimon
    test_projects:
    - exec_cmd: ansible-playbook -i inventory/production %s
      name: apimon
      repo_ref: master
      repo_url: https://github.com/opentelekomcloud-infra/apimon-tests
      scenarios_location: playbooks
    zone: production_eu-de
  production_stg:
    clouds:
    - cloud: otcapimon_probes14
      name: production_eu-de
    - cloud: otcapimon_logs_stg
      name: swift
    - cloud: otcapimon_csm1
      name: production_eu-de-csm
    epmon_clouds:
    - production_eu-de:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_css, epmon_cts, epmon_dcs, epmon_dds, epmon_deh,
          epmon_dis, epmon_dms, epmon_designate, epmon_dws, epmon_glance, epmon_keystone,
          epmon_kms, epmon_mrs, epmon_nat, epmon_network, epmon_swift, epmon_heat,
          epmon_rds, epmon_rest, epmon_sdrs, epmon_sfs, epmon_smn] | combine }}'
    gearman_host: apimon-scheduler-stg
    image_tag: change_25_latest
    statsd_host: 127.0.0.1
    test_environments:
    - clouds:
      - production_eu-de
      env:
        CSM_CLOUD: production_eu-de-csm
        OS_CLOUD: production_eu-de
      name: production_eu-de
    test_matrix:
    - env: production_eu-de
      project: apimon
      tasks:
      - scenario23_ces.yaml
    - env: production_eu-de
      project: csm
      tasks: []
    test_projects:
    - exec_cmd: ansible-playbook -i inventory/production %s
      name: apimon
      repo_ref: devel
      repo_url: https://github.com/opentelekomcloud-infra/apimon-tests
      scenarios_location: playbooks
    - exec_cmd: ansible-playbook %s
      name: csm
      repo_ref: devel
      repo_url: https://github.com/opentelekomcloud-infra/csm-test-scenarios
      scenarios_location: playbooks
    zone: production_eu-de
  production_vc:
    clouds:
    - cloud: otcapimon_probes12
      name: production_eu-de
    - cloud: otcapimon_probes16
      name: production_eu-nl
    - cloud: otcapimon_logs
      name: swift
    - cloud: otcapimon_csm1
      name: production_eu-de-csm
    epmon_clouds:
    - production_eu-de:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_css, epmon_cts, epmon_dcs, epmon_dds, epmon_deh,
          epmon_dis, epmon_dms, epmon_designate, epmon_dws, epmon_glance, epmon_keystone,
          epmon_kms, epmon_mrs, epmon_nat, epmon_network, epmon_swift, epmon_heat,
          epmon_rds, epmon_rest, epmon_sdrs, epmon_sfs, epmon_smn] | combine }}'
    - production_eu-nl:
        service_override: '{{ [epmon_antiddos, epmon_as, epmon_cce, epmon_ces, epmon_compute,
          epmon_cinder, epmon_css, epmon_css, epmon_cts, epmon_dcs, epmon_dds, epmon_deh,
          epmon_dis, epmon_dms, epmon_designate, epmon_dws, epmon_glance, epmon_keystone,
          epmon_kms_nl, epmon_mrs, epmon_nat, epmon_network, epmon_swift, epmon_heat,
          epmon_rds, epmon_rest, epmon_sdrs, epmon_sfs, epmon_smn] | combine }}'
    gearman_host: 192.168.2.55
    image_tag: change_25_latest
    statsd_host: 192.168.2.55
    test_environments:
    - clouds:
      - production_eu-de
      env:
        CSM_CLOUD: production_eu-de-csm
        OS_CLOUD: production_eu-de
      name: production_eu-de
    - clouds:
      - production_eu-nl
      env:
        OS_CLOUD: production_eu-nl
      name: production_eu-nl
    test_matrix:
    - env: production_eu-de
      project: apimon
    - env: production_eu-nl
      project: apimon
      tasks:
      - scenario1_token.yaml
      - scenario3a_evs_az.yaml
      - scenario4_image.yaml
      - scenario21_as.yaml
      - scenario18_cce_info.yaml
      - scenario18a_cluster.yaml
      - scenario20_rds.yaml
      - scenario19_simple_vpc.yaml
      - scenario2_simple_ecs.yaml
      - scenario2a_ecs_az.yaml
    - env: production_eu-de
      project: csm
      tasks:
      - lb_monitoring.yaml
    test_projects:
    - exec_cmd: ansible-playbook -i inventory/production_external %s
      name: apimon
      repo_ref: master
      repo_url: https://github.com/opentelekomcloud-infra/apimon-tests
      scenarios_location: playbooks
    - exec_cmd: ansible-playbook %s
      name: csm
      repo_ref: main
      repo_url: https://github.com/opentelekomcloud-infra/csm-test-scenarios
      scenarios_location: playbooks
    zone: vcloud_muc
apimon_k8s_instances:
- apimon_instance: production_stg
  context: otcinfra-stg
  cr_spec:
    apimon_image: quay.io/opentelekomcloud/apimon:change_25_latest
    apimon_image_pull_policy: Always
    epmon_count: 0
    executor_count: 1
    scheduler_count: 1
  instance: stg
  namespace: apimon
- apimon_instance: production_2
  context: otcapimon1
  cr_spec:
    apimon_image: quay.io/opentelekomcloud/apimon:change_25_latest
    apimon_image_pull_policy: Always
    epmon_count: 1
    executor_count: 0
    scheduler_count: 0
    statsd_graphite_host: 192.168.14.159
  instance: prod-2
  namespace: apimon
apimon_scheduler_config_template: templates/apimon/apimon.yaml.j2
apimon_scheduler_image: '{{ apimon_image }}'
apimon_scheduler_secure_config_template: templates/apimon/apimon-secure.yaml.j2
apimon_secure_file_location: /etc/apimon/apimon-secure.yaml
epmon_antiddos:
  Anti-DDoS: {}
  antiddos:
    service: anti_ddos
    urls:
    - /
    - /antiddos
    - /antiddos/query_config_list
    - /antiddos/default/config
    - /antiddos/weekly
epmon_as:
  as:
    service: auto_scaling
    urls:
    - /
    - /scaling_group
    - /scaling_configuration
    - /scaling_policy
  asv1: {}
epmon_cce:
  cce: {}
  ccev2.0:
    service: cce
    urls:
    - /clusters
epmon_ces:
  ces:
    service: ces
    urls:
    - /
    - /metrics
    - /alarms
  cesv1: {}
epmon_cinder:
  volumev2: {}
  volumev3:
    service: block_storage
    urls:
    - /volumes
    - /snapshots
    - /backups
    - /os-volume-transfer
    - /os-availability-zone
epmon_compute:
  compute:
    urls:
    - /
    - /servers
    - /flavors
    - /limits
    - /os-keypairs
    - /os-server-groups
    - /os-availability-zone
epmon_config_file_name: apimon.yaml
epmon_css:
  css:
    service: css
    urls:
    - /
    - /clusters
epmon_cts:
  cts: {}
  ctsv2:
    service: cts
    urls:
    - /
epmon_dcs:
  dcs:
    service: dcs
    urls:
    - /
    - /instances
    - /quota
  dcsv1: {}
epmon_dds:
  ddsv3:
    service: dds
    urls:
    - /
    - /v3
    - /instances
epmon_deh:
  deh:
    urls:
    - /
    - /dedicated-hosts
epmon_designate:
  dns:
    urls:
    - /
    - /zones
    - /recordsets
    - /reverse/floatingips
epmon_dis:
  dis: {}
  disv2:
    urls:
    - /
    - /streams
    - /stream/tags
epmon_dms:
  dms:
    service: dms
    urls:
    - /queues
    - /quotas/dms
    - /queue/tags
  dmsv2: {}
epmon_dws:
  dws:
    urls:
    - /
    - /clusters
    - /snaphosts
  dwsv1: {}
epmon_glance:
  image:
    urls:
    - /
    - /images
    - /schemas/images
epmon_heat:
  orchestration:
    urls:
    - /stacks
    - /build_info
    - /software_configs
    - /resource_types
epmon_keystone:
  identity:
    urls:
    - /
    - /regions
    - /auth/projects
epmon_kms:
  kms: {}
  kmsv1:
    service: kms
    urls:
    - /
    - /kms/list-keys
    - /kms/user-quotas
epmon_kms_nl:
  kms: {}
  kmsv1:
    urls:
    - /
    - /kms/list-keys
    - /kms/user-quotas
epmon_mrs:
  mrsv1:
    service: mrs
    urls:
    - /data-sources
    - /cluster_infos
    - /job-binaries
epmon_nat:
  nat:
    urls:
    - /
    - /v2.0
    - /nat_gateways
    - /snat_rules
    - /dnat_rules
epmon_network:
  network:
    urls:
    - /
    - /networks
    - /subnets
    - /ports
    - /routers
    - /floatingips
    - /security-groups
    - /subnetpools
epmon_rds:
  database: {}
  rds: {}
  rdsv1: {}
  rdsv3:
    service: rds
    urls:
    - /
    - /datastores/postgresql
    - /instances
    - /configurations
epmon_rest:
  bms: {}
  data-protect: {}
epmon_sdrs:
  sdrs:
    urls:
    - /
    - /v1
    - /active-domains
    - /server-groups
    - /protected-instances
    - /replications
epmon_secure_config_file_name: apimon-secure.yaml
epmon_secure_file_location: /etc/apimon/apimon-secure.yaml
epmon_sfs:
  sfsturbo:
    urls:
    - /sfs-turbo/shares/detail
  sharev2:
    service: share
    urls:
    - /
    - /v2
    - /shares
epmon_skip_dis:
  dis: {}
  disv2: {}
epmon_skip_smn:
  smn: {}
  smnv2: {}
epmon_smn:
  smn:
    urls:
    - /
    - /notifications
    - /notifications/subscriptions
    - /notifications/message_template
  smnv2: {}
epmon_swift:
  object: {}
  object-store:
    service: object_store
    urls:
    - /
    - /info
executor_config_file_name: apimon-executor.yaml
executor_secure_config_file_name: apimon-executor-secure.yaml
executor_secure_file_location: /etc/apimon/apimon-executor-secure.yaml
scheduler_config_file_name: apimon.yaml
scheduler_secure_config_file_name: apimon-secure.yaml
scheduler_secure_file_location: /etc/apimon/apimon-secure.yaml
