GRAFANA_IMAGE={{ grafana.grafana_image | default(grafana.default.grafana_image) }}
GRAFANA_RENDERER_IMAGE={{ grafana.grafana_renderer_image | default(grafana.default.grafana_renderer_image) }}

{% if (grafana.grafana_server_root_url is defined and grafana.grafana_server_root_url|length) or
      (grafana.default.grafana_server_root_url is defined and grafana.default.grafana_server_root_url|length) %}
GF_SERVER_ROOT_URL={{ grafana.grafana_server_root_url | default(grafana.default.grafana_server_root_url) }}
{% endif %}
GF_SERVER_ENABLE_GZIP=true
# Initial admin password. Must be changed afterwards
GF_SECURITY_ADMIN_PASSWORD={{ grafana.grafana_security_admin_password | default(grafana.default.grafana_security_admin_password) }}
GF_USERS_ALLOW_SIGN_UP={{ grafana.grafana_users_allow_sign_up | default(grafana.default.grafana_users_allow_sign_up) }}

GF_USERS_LOGIN_HINT={{ grafana.grafana_users_login_hint | default(grafana.default.grafana_users_login_hint)  }}
GF_USERS_PASSWORD_HINT={{ grafana.grafana_users_password_hint | default(grafana.default.grafana_users_password_hint) }}

{% if (grafana.grafana_db_url is defined and grafana.grafana_db_url|length) or
      (grafana.default.grafana_db_url is defined and grafana.default.grafana_db_url|length) %}
GF_DATABASE_URL={{ grafana.grafana_db_url | default(grafana.default.grafana_db_url) }}
{% endif %}

{% if (grafana.grafana_auth_github_enable is defined and grafana.grafana_auth_github_enable) or
      (grafana.default.grafana_auth_github_enable is defined and grafana.default.grafana_auth_github_enable) %}
GF_AUTH_GITHUB_ENABLED=true
GF_AUTH_GITHUB_ALLOW_SIGN_UP=true
GF_AUTH_GITHUB_CLIENT_ID={{ grafana.grafana_auth_github_client_id | default(grafana.default.grafana_auth_github_client_id) }}
GF_AUTH_GITHUB_CLIENT_SECRET={{ grafana.grafana_auth_github_client_secret | default(grafana.default.grafana_auth_github_client_secret) }}
GF_AUTH_GITHUB_SCOPES=user:email,read:org
GF_AUTH_GITHUB_AUTH_URL=https://github.com/login/oauth/authorize
GF_AUTH_GITHUB_TOKEN_URL=https://github.com/login/oauth/access_token
GF_AUTH_GITHUB_API_URL=https://api.github.com/user
GF_AUTH_GITHUB_ALLOWED_ORGANIZATIONS={{ grafana.grafana_auth_github_allowed_orgs | default(grafana.default.grafana_auth_github_allowed_orgs) }}
{% endif %}

{% if (grafana.grafana_smtp_enable is defined and grafana.grafana_smtp_enable) or
      (grafana.default.grafana_smtp_enable is defined and grafana.default.grafana_smtp_enable) %}
GF_SMTP_ENABLED=true
GF_SMTP_HOST={{ grafana.grafana_smtp_host | default(grafana.default.grafana_smtp_host) }}
GF_SMTP_FROM_ADDRESS={{ grafana.grafana_smtp_from_address | default(grafana.default.grafana_smtp_from_address) }}
GF_SMTP_FROM_NAME={{ grafana.grafana_smtp_from_name | default(grafana.default.grafana_smtp_from_name) }}
{% endif %}

{% if grafana_ldap_config is defined and grafana_ldap_config|length %}
GF_AUTH_LDAP_ENABLED=true
GF_AUTH_LDAP_ALLOW_SIGN_UP=true
GF_AUTH_LDAP_CONFIG_FILE=/etc/grafana/ldap/ldap.toml
{% endif %}

GF_RENDERING_SERVER_URL=http://{{ grafana.grafana_renderer_host | default(grafana.default.grafana_renderer_host) }}:8081/render
GF_RENDERING_CALLBACK_URL=http://{{ grafana.grafana_grafana_host | default(grafana.default.grafana_grafana_host) }}:3000/
GF_LOG_FILTERS=rendering:debug
