# promtail.service
# autogenerated by Podman 1.8.0

[Unit]
Description=Podman promtail.service
Documentation=man:podman-generate-systemd(1)

[Service]
Restart=on-failure

ExecStartPre=/usr/bin/rm -f /%t/%n-pid /%t/%n-cid

ExecStart=/usr/bin/podman run \
          --conmon-pidfile /%t/%n-pid \
          --cidfile /%t/%n-cid \
          --cgroups=no-conmon -d \
          --name promtail \
          --log-opt=path=/dev/null \
          -v /etc/promtail/config.yml:/etc/promtail/config.yml:ro \
          -v /var/log/journal:/var/log/journal:ro,z \
          -v promtail-run:/run/promtail:rw,z \
          -p 3101:3101 \
          {{ promtail_image }}

ExecStop=/usr/bin/podman stop \
         --ignore --cidfile /%t/%n-cid -t 10

ExecStopPost=/usr/bin/podman rm \
             --ignore -f --cidfile /%t/%n-cid

PIDFile=/%t/%n-pid
KillMode=none
Type=forking

[Install]
WantedBy=multi-user.target

